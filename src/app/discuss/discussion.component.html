<br><br>
<p>Discussion:{{ settings.section }}</p>
    <div class='discussionIconWrap'> 
            <div [class]='discussionIconClass' (click)="toggleDiscussion()"></div></div>
            <div class='discussionBox group' *ngIf='settings && settings.discussing'>

<div class='discussionFramer group' *ngIf='ready2display'>

<p>What are your thoughts on: {{ section.title }}?</p>
<div class='group '>
        
        <!-- <button [routerLink]="['/classes', thisClass.id ]" class='backButton'>Back to Course Material</button>
         -->
        <div *ngIf='thisClass'>
                <form [formGroup]='discussionFormGroup' (ngSubmit)='newThread()'>
                <table width='100%' class='showTable'>
                   <tr>
                <td width='90%'><input formControlName='subject' id='subject' 
                        autofocus name='subject' type='text' class='largeInput'></td>
                <td>
                <button type='submit' class='newTopicButton'>Post</button></td>
                </tr>
                </table>
        </form>

        <br clear='all'><br>

        <div *ngIf='threads'>
                <div *ngFor='let thread of threads; let i = index' class='threadContainer group'>
                        <div *ngIf="currentUser.id === thread.user_id" 
                        class='deleteThreadButton' (click)="deleteThread(thread)">delete</div>
                       <thread [thread]=thread [collapsed]='folds[i]' (foldChange)="foldChange($event)"
                        (threadChange)="threadChange($event)" (deleteReply)="deleteReply($event)"
                       (threadKill)="threadKill($event)"></thread>
                </div>
        </div>
</div>        
</div>

<!-- <div class='debug'>
        {{ discussionFormGroup.value | json }}
</div> -->
</div>